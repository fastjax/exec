# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_COMMIT_MESSAGE" = "Update README.md" ]; then
    return;
  elif [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -e -Dmaven.rtest.skip -DrepoToken=$REPO_TOKEN clean deploy -P javadoc,report,deploy;
  else
    mvn -e -Dmaven.rtest.skip clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: bx/I5pLRU6n7/friJqpTz4XeHZqS/2TRiS9UuMM3oJiS1CRIdAIfryWMVasR770DbZshT2K1y3f5zX+tKWBfj4MlWo1MWWkLFPDBOvo8BZl9H/hxVphtI7iafEpyK/Jb05RXxBp2zihvbvbvCYK2Ud3VKAYbbnBJTCfoyTiYpNmaNg4qAY4vM1kBH/Ap/4eG2gq4HHr6mriFS0J0lzLlKAhHJDpCljrZRZNSqEiAMU/nEAWQ/jI5C+YfPDkBhaelodah46Mx2hTlaGrJv7nQ+xsaUvTRo9u2b7oJ6kiuEdQa+/Ra8V0CmNbtTdlxNzYLrHupVMSGNAwbuA5pF26sTK4Ar+gw0t7B12wwFRz8tJRyGBlf+ZYTb1OJtw7LTCDsbhAsu1GufzRruqZSKPHr+hj3h5xuBQ17WrM65KbxJcvKyGcnK6M+lR0oNRfqn6bpW4tw4eT6GoAgHQCwdqQS/AWTq1vuas+tAw4o05vZwtDJGO2lMhMwh2vPI7YC1XJhIFJ8iqZfPmdE5URAWR6pphjdgSwRMQMQ8xtVe8Zajp5vEhVwoW7QN83S7i7aSkKDLmxIv3qiIAczcdKSSwuJ6NDFs4LT/3hZjgiAxMP2JwDWoLkNpgViBzNtjdtcmwH/7vwyMF43jc+9gzbh0GLjengcMYwK48VKOgj1dJRSrTo=
  - secure: k6fWO6n4siKUOJuvWBBEqrF1K+a4Py3PemfZYZAilG6coqde5HmRRP9NEc8AKwOc1DnjtiEBXaGcUgmdswo1gC6L3k3lF0vQyIvA7LclPRfjhd5xzT/hqiqPjivIwqjjs6RRIcm0Sf35z6WH2wCNrRZv3HCa23UR3ZQEPHEqHOmpkYQD6p+EC1lHdrqUuz+vn4yssLVL8A89MBvivJi0lkE4MIPaE85rrv1Qtok074K0mSHXgqkeotRKNhzs0wvpREZyPTtVxsdNIPoqnVzg3yMwc+mo/zrf8I/cDglcEUeiMhl+Q35505UdFIroUCuHUKQQAPujLKdn/a5AQ5Kp1iuA3nCnDMRtaGSSqWt1x3WkGPPpL4KgCpwD9din8ppgTUHarVaetSInR1XWuP9fDQ8QayTU+M00h6vx1OawYalfFolXjdoA44+be7QSsM9AFHIr+JnytZdDwvatMyBV+538A9HqxsgBcj6lc5GYfNc62bNIoFcjJHyV5osuo8HRWvLbwVBptrwYJeSw0PPK57ZYv6+Q5oeD8hdCpajEaKTqic6NBUvpWyNA4mMF2JgAfyS4q8tQMUDp3QRPfaxT5aelUJERIuOcsyjDC7a/e4rVFv6NYaoecYZMKx9uHY9nYFiIRFqkzdSdKcqAzn9GzwBvW+zQmecNVvC8bRFvV1s=
  - secure: g60OxQxd3hP3Abml1zwxMuIuuhdD8ar9mNQCBLqoT/U0VNjl5REgL9Y28RwPkQOOZyhM/ddGq+TfLNMnoBylceRPXt9QO0OhWw1I15zHSM/C9fZHNPZK5ldtT7hStsmHaf7jtdEcOsBmKOS1wwnpTQYEW4P2dr1ol5M+9ymz+Vxe56jnBNrt5afheuo+yFwkhin/bcVkErXC67SM2pQTC71jGss7JW0hryu7A4DqfKe9AmcdKXtZg5czSHssDDZ7vW2rAzRNmjr/CtcwQxoTPts77lpjM9IOoycknmiiT7nmEHPdUwkIPqJbzf4OcaHfe/pbNfoybyf7keqGcoYkjvGAMw6i/fThAaGviT8EG9AFBhofm045rz+Vqy4S9JI0Bry3YaqDtDc+CgHaPSxA85X69sY/g+ZZkxqvPI82l9lYwJ6bPUpRZgFyx/1xEnpPOMW30L2b6MaDRE12y0JAYPibwK/1rj6yyPwhRNLk2IJiMLNgV1HPUq9LrjZwcVrEh6/1qceU34zWOTRRh2H+3HD1IIZWt5cOLy3YsCPM/Ih/TXpCZExnfnoiLSdL8ts8qz+b2hYdhw+y4znzz8Fq1gZkmtEdXwlCPnzGgd5pf+3ubNlqrSaTHGM4ZMIN+O+JTR92tsYzSZx07N7d6dtcNVcdLQZkh0Eb+sgcIeYt1cA=
  - secure: dOPgAy20FEclIO0THUy7Xq6Qs0Au+k18BIMV8qktFY0iwhdUq7Q1OraDN2k2A8gtLf6iLZ0W75uMkbqk2kZjd40LBt2PHM3qDtQlzrOHJDbdvHjcEWJXthtUgzqcgA9IVG/AVaMJaeNLvo8XjMOknZJQrVfwvAhW2w4UC/B2BR6aGRX3jr1BX0U2NflvfsXHnUb93QQwksEV5aqO6Hr8VCdn6zaDg4N2Wo/88+M9ljo44WjXK7i/9tpe+SvUnySF5nd+oho9JEjuvXy5lzPcXTRZ9pnBOnRmtNM5VnAQ44/ippc24oqFWU+91Zus3buOfC3V7Z0b2nTxxZjpsBXTnFEcAtVX/gZCixgHnDXvGdKOcAjuVFEaYnNYemfcog1p7t4p9rgVfpftizXOMeNqkO+gLdVPgbaw54pEGxyWYcCXeM2/odspgJXpryMAx/RbhUQ2mz7k9jz/ajJaWeMSQOfh+a/CunTWVGwGPgnwlBnyh95yHeH5xgA0xD5NEjKV9hC6yfI/ppGEVIbWwYJ3hiEZzq8ZH0HcM4BdGxNw4fODfuNMEpPJ2PgVqhtjExrZMOTqjbi6hXA5kErVgKj2F13wW0TpBEgerIh80BG9z7C/JDrgmYLOYY4UIu4mxs2UiRS9sy2Z2ClHUuQrrHJHiMzlV0r5iA4fnYs5NrQzfis=
  - secure: HNEssgFvKW0ZnuodTX31XLwYjHtFduaWOWK8pIfbUBpwXfMI6KGCFNXHJiDUniBfgAhkGKqgqo94zsYHMJZlTRzC/AKid9CczXOxfRn+f+YFc+aYP5hAO4pk/7tYzflDf/6e7IU1VXqyLz+PFQc/QRBreaqDEg0AoE+MU4nfvPRRiWyKatXunxS9SrUJRoNmEt+RJNGVwezmyP0f1G9ow3CF+jnUojxJFVr/TjoNb6ytAYWRf6KnDJn/ze/NVeOxY+l5ANIAVA0ryrp1vjkcBE+mVYCA5IioAnob2X+3wFNqb/k41va7jYQbVamfa6qarV8ih8dlXIT4DZbo4gjZtE0EGTlh/BCUNe5tHC4Vni8AcptF29/unv183gAcJuHas7SYHKrQHt9D68iThw7inTuEb0d0aHkL4WCBLnLMs4VD8H25qTjYNzNzbD+khzFkAUeGWR+yphRLfQWMRNXYVKnNK39OGCvKU7ahSYTHDKaQN6gd3DxMnVCpP+5rq7CQburYVeX2UluUF2aQ9pnvv+T1CNqAoFlgixEic1CHG9FlGS7Iu/BQWK8YNjelpj5T9jMItvD/rrVpgZygC0iYkeQ7UreQj9AlEAj+v++Sgm5nWOf2qp9YxiEWkriF1SzCePibkE9ERdM3dkilHNxPkPT5JF7EIThWzWKI9GIoa+U=
  - secure: q7jefE0SUdHxTDuY18Y+/OsZmD0+I/PdTA8rn7FD5YLVXUp9F8sIxgN9lOxYJkivSyLA+NmA+71dhg/KD2CzEE/fmH74CZes0ZtugWjnxFSU0zx4aIhYVPC/1ObbJMKU23uXAJTpaK1zXssWSFtTvpGn6Ro9U+80f5wM/NcBRsmBO9iEhFn7iBpFZRR+Mn/izTcwLUH3yDm7JfKLo2UoxZO2T4s1VMmmPcVjNeg/ivBPRp1DreSr69n8LaxUrAk69hqnMT0+2DWJOY69xk0eA64Kqudxw7mD3DT/Ea+AhCiOc4+y7ZJmchcrDbKJwitBEaxWLM7jtvrkEMvL4PluZUS80eYnCacEMrWHyeX2ciomLxPfeaNju8oRiHRtFxetKiC9FRp49CCEvDgZX6hPSE0XywqNxuOvZvFVFq6XWUPA72qxIZunU3kmNSIaSfeVeEAFCprRjNpiaHigLoR7mEhzPjb9HNCnF7meSJEc16C2/n3TpOksgvCZv7mMOeYpgNu3rqGeLCOAF0lBIY3jelAj6GJ0PscXdecHsZ8q2dFL3rtydkar9IuAKjlWVK0qqF0R62BHzg3iyAJd+G0cSfhs9M0LLwzg3oQOGKSsM3GO16cPqbZg0muXfA4sefaEl8M41cSJJJWJHjqEdWMP70GU+n3dS8XLSYaEpbPIlsk=
  - secure: qmdIZx2ggwcBZ8P5JsPyLHmP6VTU6T9CIZ8kW2fE5xOitzrjpG/usf3wzzwgQMJs5aLLbzKnXb1LpUlgFzEhFqAKdWDAJV/GgfLUu1GNApyJbAlRdmMmNeUvoZx4QVaT/xSkPRV/uaryakoE29sUeKj8S70d1jtwn9xkJfEla5W694mAVsSWlcUapX0lG0EpKCrop+FRc+59QBLa7y65ZSWqNAvFi7Fxfgmu86wLXTK1DvN96l4knNN2YQDBkse5hr3PTLZ0/GQflr1zPT+3XLAejMNQZTLCEvwVf7ni7apI4gpEKAj1VDRzY0D7ee8UtzGJrhiFl0uWEHnbtj3CSz2JzsLKVi3PpCV6pmWH7Gu5zqzkk7rGgaHq2yVKamgcoW4LqBhx8I+/iphS+imiI41lzc4DPN+p5nTfJUJQFxfNdiv723Kj7JYyrga6yG4+qro6ac7ujivjZFX/9e9BsnLuLgwTGV8vrwBe+FkEB3Fqo++Az2f64wVH8IgMshq6Q7AlMzIUjSGEXQahEIvqfTuPoXDDw8qnLWMQdW8d60KkDIRRzJO2luVIrMIfjy94awcryHXGJ/CuxLZmO3AckOVLgA2HSkOL+Fk7sOVFfyydFdNubV2nWQViOXJeL/e/qN2WaBMfnSwVH3JgdF/hO016bnKHlYPqsC646NyqfEc=
